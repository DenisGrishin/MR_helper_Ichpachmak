# MR-helper

–ë–æ—Ç –ø–æ–º–æ–≥–∞–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º –∏–∑–±–∞–≤–∏—Ç—å—Å—è –æ—Ç —Ä—É—Ç–∏–Ω—ã: –æ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ç–µ–≥–∞–µ—Ç —á–ª–µ–Ω–æ–≤ –∫–æ–º–∞–Ω–¥—ã, –ø—Ä–∏–∫—Ä–µ–ø–ª—è–µ—Ç —Å—Å—ã–ª–∫—É –Ω–∞ –∑–∞–¥–∞—á—É –∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ merge request.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### üîó –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å GitLab

<!-- –∏—Å–ø—Ä–∞–≤–∏—Ç—å –æ–ø–∏—Å–∞–Ω–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π -->

- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ Merge Request'–æ–≤ –∏ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á –∏ –∏—Ö —Å—Ç–∞—Ç—É—Å–∞
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –ø—Ä–æ–µ–∫—Ç–∞–º–∏ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ GitLab
- –ü—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ä–∞–±–æ—á–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤

### üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –±–æ—Ç–∞
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ GitLab ID
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–µ—Å–µ—Ç–æ–≤ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∑–∞–¥–∞—á
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–º–∏ –∑–∞–¥–∞—á–∞–º–∏ –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º

### üìã –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∞–º–∏

- –ü—Ä–æ—Å–º–æ—Ç—Ä –∞–∫—Ç–∏–≤–Ω—ã—Ö Merge Request'–æ–≤
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∑–∞–¥–∞—á –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π —Ä–µ–≤—å—é GitLab

## –ö–æ–º–∞–Ω–¥—ã

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

| –ö–æ–º–∞–Ω–¥–∞                       | –û–ø–∏—Å–∞–Ω–∏–µ                                        |
| ----------------------------- | ----------------------------------------------- |
| `/set_use <–∏–º–µ–Ω–∞>`            | –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –±–æ—Ç–∞       |
| `/set_id_git_lab <id gitLab>` | –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é ID GitLab                 |
| `/completed_tasks`            | –í—ã–≤–µ—Å—Ç–∏ —Å–ø—Å–∏–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ—Ö –∑–∞–¥–∞—á               |
| `/menu`                       | –ö–æ–º–∞–Ω–¥–∞ –∏—Ç–µ—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ –º–µ–Ω—é, –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–æ—Ç–∞–º |

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∞–º–∏

| –ö–æ–º–∞–Ω–¥–∞            | –û–ø–∏—Å–∞–Ω–∏–µ                                     |
| ------------------ | -------------------------------------------- |
| `/completed_tasks` | –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π |

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å GitLab

| –®–∞–±–ª–æ–Ω                         | –û–ø–∏—Å–∞–Ω–∏–µ                             |
| ------------------------------ | ------------------------------------ |
| `!!https://gitlab.example.com` | –ü–æ–ª—É—á–∏—Ç—å –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π –∏ —Ä–µ–≤—å—é–µ—Ä–æ–≤ MR |
| `~https://gitlab.example.com`  | –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –¥–µ—Ç–∞–ª–∏ –∞–∫—Ç–∏–≤–Ω—ã—Ö MR       |
| `!https://gitlab.example.com`  | –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–µ—Å–µ—Ç–∞—Ö MR    |

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone <repo>
cd telegrambot

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install

# –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª –æ–∫—Ä—É–∂–µ–Ω–∏—è
cp .env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å .env —Å –≤–∞—à–∏–º–∏ —Ç–æ–∫–µ–Ω–∞–º–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏

# –°–æ–±—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç
npm run build

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞
npm run start:prod

# –ò–ª–∏ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
npm run dev
```

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ `.env` —Ñ–∞–π–ª –∏–∑ `.env.example` –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ:

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è      | –û–ø–∏—Å–∞–Ω–∏–µ                                          | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ |
| --------------- | ------------------------------------------------- | ----------- |
| `BOT_API_KEY`   | –¢–æ–∫–µ–Ω Telegram –±–æ—Ç–∞ –æ—Ç @BotFather                 | –î–∞          |
| `TOKEN_GIT_LAB` | –ü—Ä–∏–≤–∞—Ç–Ω—ã–π —Ç–æ–∫–µ–Ω GitLab –∏–∑ –ü—Ä–æ—Ñ–∏–ª—å > Access Tokens | –î–∞          |
| `BASE_URL`      | URL —Å–µ—Ä–≤–µ—Ä–∞ GitLab (–±–µ–∑ https://)                 | –î–∞          |
| `PROJECT_ID`    | ID –ø—Ä–æ–µ–∫—Ç–∞ –≤ GitLab (–Ω–∞–π—Ç–∏ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø—Ä–æ–µ–∫—Ç–∞)  | –î–∞          |

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
telegrambot/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ main.ts                 # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îÇ   ‚îú‚îÄ‚îÄ BotInstance.ts          # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –±–æ—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ type.ts                 # –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–∏–ø–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ apiGitLab.ts       # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å GitLab API
‚îÇ   ‚îú‚îÄ‚îÄ command/                # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ commandAllUser.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ commandDeleteUser.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ commandCompletedTasks.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ commandPreset.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ commandEditStatusUser.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CommandDispatcher.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ constant.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ handleCommand.ts
‚îÇ   ‚îú‚îÄ‚îÄ db/                    # –°–ª–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ db.ts             # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SQLite –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ users.ts          # –ú–æ–¥–µ–ª—å –∏ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ helpers.ts        # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –ë–î
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.ts
‚îÇ   ‚îú‚îÄ‚îÄ hears/                 # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ hearsActiveMR.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ hearsAssigneesReviewersMR.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ hearsPresetMR.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ hearsDelMsgBot.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ constant.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.ts
‚îÇ   ‚îú‚îÄ‚îÄ hears/helper/           # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ TaskService.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ helper.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.ts
‚îÇ   ‚îî‚îÄ‚îÄ keyboards/
‚îÇ       ‚îî‚îÄ‚îÄ keyboard.ts        # Inline-–∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
‚îú‚îÄ‚îÄ dist/                      # –°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π JavaScript
‚îú‚îÄ‚îÄ late.sqlite               # –§–∞–π–ª –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö SQLite
‚îú‚îÄ‚îÄ .env.example              # –®–∞–±–ª–æ–Ω –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îî‚îÄ‚îÄ package.json
```

## –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–ë–æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç SQLite —Å –¥–≤—É–º—è –æ—Å–Ω–æ–≤–Ω—ã–º–∏ —Ç–∞–±–ª–∏—Ü–∞–º–∏:

### –¢–∞–±–ª–∏—Ü–∞ Users

- `id` - –ü–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á
- `name` - –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `isActive` - –°—Ç–∞—Ç—É—Å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (0/1)
- `idGitLab` - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ GitLab
- `preset` - JSON —Å—Ç—Ä–æ–∫–∞ —Å –ø—Ä–µ—Å–µ—Ç–∞–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `completedTasks` - JSON —Å—Ç—Ä–æ–∫–∞ —Å –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–º–∏ –∑–∞–¥–∞—á–∞–º–∏

### –¢–∞–±–ª–∏—Ü–∞ TasksUsers

- `id` - –ü–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á
- `name` - –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `completedTasks` - JSON —Å—Ç—Ä–æ–∫–∞ —Å –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–º–∏ –∑–∞–¥–∞—á–∞–º–∏

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **[grammY](https://grammy.dev/)** - –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è Telegram –±–æ—Ç–æ–≤
- **[SQLite3](https://github.com/TryGhost/node-sqlite3)** - –î—Ä–∞–π–≤–µ—Ä SQLite –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- **[Axios](https://axios-http.com/)** - HTTP –∫–ª–∏–µ–Ω—Ç –¥–ª—è GitLab API
- **[TypeScript](https://www.typescriptlang.org/)** - –¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–π JavaScript

## –°–∫—Ä–∏–ø—Ç—ã

| –ö–æ–º–∞–Ω–¥–∞              | –û–ø–∏—Å–∞–Ω–∏–µ                                          |
| -------------------- | ------------------------------------------------- |
| `npm run dev`        | –†–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Å –≥–æ—Ä—è—á–µ–π –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–æ–π          |
| `npm run build`      | –ö–æ–º–ø–∏–ª—è—Ü–∏—è TypeScript –≤ JavaScript                |
| `npm run start:prod` | –ó–∞–ø—É—Å–∫ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –±–æ—Ç–∞ –≤ production —Ä–µ–∂–∏–º–µ |

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Node.js 22.2.0+
- –¢–æ–∫–µ–Ω Telegram –±–æ—Ç–∞ –æ—Ç [@BotFather](https://t.me/BotFather)
- –≠–∫–∑–µ–º–ø–ª—è—Ä GitLab —Å –¥–æ—Å—Ç—É–ø–æ–º –∫ API
- –î–æ—Å—Ç—É–ø –∫ –ø—Ä–æ–µ–∫—Ç—É GitLab —Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º–∏ –ø—Ä–∞–≤–∞–º–∏

## –õ–∏—Ü–µ–Ω–∑–∏—è

ISC
